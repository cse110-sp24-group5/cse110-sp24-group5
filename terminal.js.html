<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>terminal.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addDayClickEvents">addDayClickEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearPreviousDays">clearPreviousDays</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#convertDateToWords">convertDateToWords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createBlankDay">createBlankDay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createCalendarDay">createCalendarDay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createCalendarDays">createCalendarDays</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createOverlay">createOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#formatDate">formatDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getFromLocalStorage">getFromLocalStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getMonthDetails">getMonthDetails</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTasksForDate">getTasksForDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hideOverlay">hideOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hideTaskListPopUp">hideTaskListPopUp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#insertBlankSpacesAtEnd">insertBlankSpacesAtEnd</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#insertBlankSpacesAtStart">insertBlankSpacesAtStart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadTasksFromStorage">loadTasksFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#recordSentiment">recordSentiment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#renderCalendar">renderCalendar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveSentimentForCurrSliderVal">saveSentimentForCurrSliderVal</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setFields">setFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#settingRowNumber">settingRowNumber</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showEditor">showEditor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showOverlay">showOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showPreview">showPreview</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showTaskListPopUp">showTaskListPopUp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateFaceIcon">updateFaceIcon</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateMonthYearText">updateMonthYearText</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">terminal.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Adds event listeners once the DOM content is loaded.
 * Handles commands for the terminal.
 */
document.addEventListener('DOMContentLoaded', function () {
  // Ensure infoBtn, infoBox, and closeBtn exist before adding event listeners
  var infoBtn = document.getElementById('infoBtn');
  var infoBox = document.getElementById('infoBox');
  var closeBtn = document.getElementById('closeBtn');

  if (infoBtn &amp;&amp; infoBox &amp;&amp; closeBtn) {
    // Event listener to show infoBox
    infoBtn.addEventListener('click', function () {
      infoBox.style.display = 'block';
    });

    closeBtn.addEventListener('click', function () {
    // Event listener to close infoBox

      infoBox.style.display = 'none';
    });

    // Close the info box if the user clicks outside of it
    window.onclick = function (event) {
      if (event.target != infoBox &amp;&amp; event.target != infoBtn &amp;&amp; event.target != closeBtn) {
        infoBox.style.display = 'none';
      }
    };
  }

  // Ensure terminal elements exist before adding event listeners
  const terminal = document.getElementById('terminal');
  const terminalInput = document.getElementById('terminal-input');
  const terminalContent = document.getElementById('terminal-content');
  const terminalClose = document.getElementById('terminal-close');
  /**
  * Visibility of the terminal is handled here.
  */
  if (terminal &amp;&amp; terminalInput &amp;&amp; terminalContent &amp;&amp; terminalClose) {
    function toggleTerminal() {
      terminal.classList.toggle('hidden');
      if (!terminal.classList.contains('hidden')) {
        terminalInput.focus();
      }
    }

    document.addEventListener('keydown', function (event) {
      if (event.ctrlKey &amp;&amp; event.key === '/') {
        event.preventDefault();
        toggleTerminal();
      }
      if (!terminal.classList.contains('hidden') &amp;&amp; event.key === 'q') {
        terminal.classList.add('hidden');
      }
    });

    terminalClose.addEventListener('click', function () {
      terminal.classList.add('hidden');
    });

    terminalInput.addEventListener('keydown', function (event) {
      if (event.key === 'Enter') {
        const command = terminalInput.value;
        terminalInput.value = '';
        terminalContent.textContent += `\n$ ${command}`;
        terminalContent.scrollTop = terminalContent.scrollHeight;
        // Execute different commands based on the current page
        const currentPage = document.body.getAttribute('data-page');
        switch (currentPage) {
          case 'home':
            handleHomeCommands(command);
            break;
          case 'calendar':
            handleCalendarCommands(command);
            break;
          case 'dev-journal':
            handleDevJournalCommands(command);
            break;
          default:
            terminalContent.textContent += `\nUnknown page`;
        }
      }
    });

    // Functions to handle commands for different pages
    function handleHomeCommands(command) {
      // Add logic for home page commands
      terminalContent.textContent += `\nHome Page command executed: ${command}`;
      // regexes for commands
      const regexCalendarCD = /cd calendar/i;
      const regexDevJournal = /dev-journal/i;
      if (regexCalendarCD.test(command)) {
        window.location.href = 'calendar.html';
      } else if (regexDevJournal.test(command)) {
        window.location.href = 'dev-journal.html';
      } else {
        terminalContent.textContent += `\nCommand not recognized`;
      }
    }
     /**
     * Handles all possible calendar commands.
     * @param {string} command - The command entered by the user.
     */

    // Will handle all possible calendar commands
    function handleCalendarCommands(command) {
      terminalContent.textContent += `\nCalendar Page command executed: ${command}`;
      
      let currentDate = new Date(); 
      const input = command.trim(); 
      const dateRegex = /^(\d{2})\/(\d{4})$/;

      // Checks whether terminal input is in MM/YYYY or DD format or something else
      if (dateRegex.test(input)) {
        monthYearFormat(input);
      } else if (parseInt(command) >= 1 &amp;&amp; parseInt(command) &lt;= 31) {
        dayFormat(command);
      } else {
        handleOtherCommands();
      }

      // Given MM/YYYY format, exceutes neccessary commands
      function monthYearFormat(input) {
        const [, month, year] = input.match(dateRegex).map(Number);
        const newDate = new Date(year, month - 1); 
        if (!isNaN(newDate.getTime())) {
          // Update currentDate to the new date
          currentDate = newDate; 
          // Render the calendar for the new month and year
          renderCalendar(currentDate); 
        }
      }
    /**
     * Executes necessary commands for the given DD format.
     * @param {string} command - The command entered by the user.
     */
      function dayFormat(command) {
        const dayNumber = parseInt(command);
        if (dayNumber >= 1 &amp;&amp; dayNumber &lt;= 31) {
          const dayElements = document.querySelectorAll('.days li span'); 
          // new Date(year, month + 1, 0) gets the last day of the current month
          const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
          if (dayElements.length > 0 &amp;&amp; dayNumber &lt;= daysInMonth) {
            // Simulate a click on the day element (subtract 1 due to zero indexing)
            dayElements[dayNumber - 1].click(); 
          }
        }
      }

      /**
       * Handles commands related to cd in the terminal.
       */
      function handleOtherCommands(){
        const regexCD = /cd \.\./i;
        const regexTaskList = /.* [dea]$/;

        // Checks whether user wants to go back to homepage or edit taskList
        if (regexCD.test(command)) {
          window.location.href = 'index.html';
        } else if (regexTaskList.test(command)) {
          goToTaskList(command);
        } else {
          terminalContent.textContent += `\nCommand not recognized: ${command}`;
        }
      }

    /**
     * Handles navigation to the task list based on the given command.
     * Handles commands related to adding, deleting and editing a task
     * @param {string} command - The command entered by the user.
     */

      function goToTaskList(command) {
        // Check if the last char is a d, e, or a
        const lastChar = command.charAt(command.length - 1);
        const taskName = command.substring(0, command.length - 2);
        // Get specified date
        const dateElement = document.getElementById('date');
        const dateText = dateElement.textContent;
        // Get all the tasks for the specified date
        const tasksForDate = getTasksForDate(dateText);
        // Will execute given taskList command on the specified taskName
        findTask(tasksForDate, taskName, lastChar);
      }
    /**
     * Finds a specific task given the date and executes the delete or edit command.
     * @param {Array} tasksForDate - The array of tasks for the specified date.
     * @param {string} taskName - The name of the task to find.
     * @param {string} lastChar - The last character of the command indicating the action (delete or edit).
     */
      function findTask(tasksForDate, taskName, lastChar){
        const allTasks = tasksForDate.find(task => task.titleText == taskName);
        if(allTasks){
          if (lastChar == 'd') {
            handleDeleteShortcut(task);
          } else if (lastChar == 'e') {
            handleEditShortcut(task);
          }
        }
      }

    /**
     * Executes the edit command for the specified task.
     * @param {Object} task - The task to be edited.
     */
      function handleEditShortcut(task) {
        const dateElement = document.getElementById('date');
        const dateText = dateElement.textContent;
        const tasksForDate = getTasksForDate(dateText);

        if (tasksForDate.length > 0) {
          handleEditButtonClick(task);
        }
      }

    /**
     * Executes the delete command for the specified task.
     * @param {Object} task - The task to be edited.
     */
      function handleDeleteShortcut(task) {
        const dateElement = document.getElementById('date');
        const dateText = dateElement.textContent;
        const tasksForDate = getTasksForDate(dateText);

        if (tasksForDate.length > 0) {
          handleDeleteButtonClick(task);
        }
      }
    }

  /*
   * Executes the corresponding markdown command and the commands for the bug and learnings boxes.
   * @param {string} command - The command entered by the user.
   * @param {Map} commandList - The map containing markdown commands and their corresponding functions.
   */
    function markdownExecute(command, commandList) {
      if (command === commandList.get('showPreview')) {
        showPreview();
      } else if (command === commandList.get('showEditor')) {
        showEditor();
      } else if (command === commandList.get('saveData')) {
        saveData();
      } else if (command === commandList.get('showBug')) {
        showBug();
      } else if (command === commandList.get('showLearnings')) {
        showLearnings();
      } 
    }

  /**
   * Handles commands specific to the roles box.
   * @param {string} command - The command entered by the user.
   */
    function devJournalExecute(command, commandList) {
      if (commandList.get('regexCD').test(command)) {
        window.location.href = 'index.html';
      } else if (commandList.get('regexBug').test(command)) {
        toggleCheckbox('debuggingCheckbox');
      } else if (commandList.get('regexDisc').test(command)) {
        toggleCheckbox('discussionCheckbox');
      } else if (commandList.get('regexCode').test(command)) {
        toggleCheckbox('codingCheckbox');
      } else if (commandList.get('regexDoc').test(command)) {
        toggleCheckbox('documentationCheckbox');
      } else if (commandList.get('regexClear').test(command)) {
        terminalContent.textContent = '';
      }
    }

    // Checks to see if map contains the value
    function hasValue(map, value) {
      for (let val of map.values()) {
        // handles the case of regular expression
        if (val instanceof RegExp) {
          if (val.test(value)) {
            return true;
          }
        } 
        // handles the case of strings
        else if (val === value) {
          return true;
        }
      }
      return false;
    }

    /**
     * Handles commands specific to the dev journal page.
     * @param {string} command - The command entered by the user.
     */
    function handleDevJournalCommands(command) {
      terminalContent.textContent += `\nDev Journal Page command executed: ${command}`;
      
      // Defining all regular expressions for the devjournal here
      const devJournalCommands = new Map ([
        ['regexCD', /cd \.\./i],
        ['regexBug', /bug/i],
        ['regexDisc', /com/i],
        ['regexCode', /code/i],
        ['regexDoc', /doc/i],
        ['regexClear', /clear/i]
      ]);

      // Defining all regular commmands for markdown here
      const markdownCommands = new Map ([
        ['showPreview', 'md p'],
        ['showEditor', 'md e'],
        ['saveData', 's'],
        ['showBug', 'b'],
        ['showLearnings','l'],
      ]);
      
      const lowerCaseCommand = command.toLowerCase();
      // the command is for markdown
      if (hasValue(markdownCommands, lowerCaseCommand)) {
        markdownExecute(lowerCaseCommand, markdownCommands);
        terminalContent.textContent += `\nenter mdcmd ${command}`;
        
      }
      // The command is for devJournal
      if (hasValue(devJournalCommands, command)) {
        devJournalExecute(command, devJournalCommands);
        terminalContent.textContent += `\nenter dvcmd ${command}`;
      }
      // The command does not exist
      if (!hasValue(devJournalCommands,lowerCaseCommand) &amp;&amp; !hasValue(markdownCommands, lowerCaseCommand)) {
        terminalContent.textContent += `\nCommand not recognized`;
      }
    }
  }
});</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Jun 06 2024 19:06:01 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
