<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>dev-journal.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#formatDate">formatDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#load">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setFields">setFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showEditor">showEditor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showPreview">showPreview</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">dev-journal.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* marked */

/**
 * Format the date to be of the form YYYY-MM-DD
 * 
 * @param {Date} dateObject - The Date object
 * @returns {string} The formatted date string in YYYY-MM-DD format
 */
function formatDate(dateObject) {
    const year = dateObject.getFullYear();
    const month = String(dateObject.getMonth() + 1);
    const day = String(dateObject.getDate());
    return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
}

/**
 * Set the datepicker and title to the current Date when the page is loaded.
 * When the date on the datepicker changes, the same should be reflected in the title.
 */
function setFields() {
    
    const datepicker = document.getElementById('datepicker');
    const title = document.getElementById('title');

    // Set the title based on the date selected in the datepicker
    const currentDate = new Date();
    const formattedDate = formatDate(currentDate);
    datepicker.value = formattedDate;
    title.innerText = formattedDate;

    // Event listener to update title when date changes
    datepicker.addEventListener('change', function() {
        title.innerText = datepicker.value;
        loadData();
    });
}

/**
 * Sets up the inner HTML of the preview to be the parsed version of markdown
 * and displays the preview &lt;div>
 */
function showPreview(){
    console.log("show preview")
    const input = document.querySelector('.editor');
    // eslint-disable-next-line no-undef
    const html = marked.parse(input.value);

    // show the preview
    const markdownPreview = document.getElementById('markdown-preview');
    markdownPreview.innerHTML = html;
    markdownPreview.style.display = 'block' // what to put here
}

/**
 * Hides the &lt;div> for the preview which should be on top of the editor.
 */
function showEditor(){
    // hide the preview
    console.log('in show editor')
    const markdownPreview = document.getElementById('markdown-preview');
    markdownPreview.style.display = 'none';
}

/**
 * Saves data to local storage in the following format
 * 
 * date1 : {    
        "markdownEditor": "Markdown content for date",
        "roleFulfilled": {
            "documentation": true/false,
            "coding": true/false,
            "discussion": true/false,
            "debugging": true/false
        },
        "bugTracker": "Bug tracker content for date1",
        "reflections": "Reflections content for date1"
    }

    The date1 is of form YYYY-MM-DD
 */
function saveData() {
    const currentDate = document.getElementById('datepicker').value;
    const markdownEditor = document.getElementById('markdown-editor').value;
    const roleFulfilled = {
        documentation: document.getElementById('documentationCheckbox').checked,
        coding: document.getElementById('codingCheckbox').checked,
        discussion: document.getElementById('discussionCheckbox').checked,
        debugging: document.getElementById('debuggingCheckbox').checked
    };
    const bugTracker = document.getElementById('bug-tracker').value;
    const reflections = document.getElementById('learnings').value;

    // Create an object to store the data
    const data = {
        markdownEditor: markdownEditor,
        roleFulfilled: roleFulfilled,
        bugTracker: bugTracker,
        reflections: reflections
    };

    // Convert the data object to JSON
    const jsonData = JSON.stringify(data);

    // Save the JSON data to local storage with the current date as the key
    if (localStorage) {
        localStorage.setItem(currentDate, jsonData);
        alert("Data saved successfully!");
    } else {
        alert("Local storage is not supported on this browser. Can not save data!");
    }
}

/**
 * Loads data from local storage and pre-fills pages on the dev journal based on that
 */
function loadData() {
    const currentDate = document.getElementById('datepicker').value;

    if (!localStorage) {
        alert("Local storage is not supported on this browser. Data cannot be loaded.");
    }

    const jsonData = localStorage.getItem(currentDate);

    if (!jsonData) {
        // set to default - empty strings and unselected
        document.getElementById('markdown-editor').value = '';
        document.getElementById('documentationCheckbox').checked = false;
        document.getElementById('codingCheckbox').checked = false;
        document.getElementById('discussionCheckbox').checked = false;
        document.getElementById('debuggingCheckbox').checked = false;
        document.getElementById('bug-tracker').value = '';
        document.getElementById('learnings').value = '';
        return;
    }
    const data = JSON.parse(jsonData);

    // Set values from data object to corresponding elements
    document.getElementById('markdown-editor').value = data.markdownEditor;
    document.getElementById('documentationCheckbox').checked = data.roleFulfilled.documentation;
    document.getElementById('codingCheckbox').checked = data.roleFulfilled.coding;
    document.getElementById('discussionCheckbox').checked = data.roleFulfilled.discussion;
    document.getElementById('debuggingCheckbox').checked = data.roleFulfilled.debugging;
    document.getElementById('bug-tracker').value = data.bugTracker;
    document.getElementById('learnings').value = data.reflections;

}

/**
 * Fields are set, saved data is loaded in when upon DOMContentLoaded
 */
function load(){
    // set the title and other input fields to contents of localStorage
    setFields();
    loadData();

    // show or hide preview based on button clicks
    const editorButton = document.querySelector('.editor-button');
    const previewButton = document.querySelector('.preview-button');
    editorButton.addEventListener('click', showEditor);
    previewButton.addEventListener('click', showPreview);

    const saveButton = document.querySelector('.save-button');
    saveButton.addEventListener('click', saveData);
}



document.addEventListener("DOMContentLoaded", load);

</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Wed May 29 2024 19:46:45 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
